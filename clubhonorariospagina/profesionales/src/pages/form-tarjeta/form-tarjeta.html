<ion-header>
   <ion-navbar>
      <ion-title>Formulario Nueva Tarjeta</ion-title>
   </ion-navbar>
</ion-header>

<ion-content padding>
   <form col-6 offset-3 [formGroup]="formularioTarjeta" novalidate (ngSubmit)="save(formularioTarjeta)">
         <h4>Agregar Tarjeta</h4>
      <ion-item>
         <ion-label>Nombre</ion-label>
         <ion-input type="text" class="form-control" formControlName="nombre"></ion-input>
         <p *ngIf="!formularioTarjeta.controls.nombre.valid" class="text-danger">
            Name is required (minimum 5 characters).
         </p>
      </ion-item>
      <ion-item>
         <ion-label>Nombre corto</ion-label>
         <ion-input type="text" class="form-control" formControlName="nombreCorto"></ion-input>
         <p *ngIf="!formularioTarjeta.controls.nombreCorto.valid" class="text-danger">
            Name is required (minimum 5 characters).
         </p>
      </ion-item>
      <!--cuotaComision-->
      <div formArrayName="cuotaComision">
         <div *ngFor="let address of formularioTarjeta.controls.cuotaComision.controls; let i=index">
            <div>
               <a *ngIf="formularioTarjeta.controls.cuotaComision.controls.length > 1" (click)="removeAddress(i)">
                  <ion-icon name="trash"></ion-icon>
               </a>
            </div>
            <div [formGroupName]="i">
               <ion-row>
                  <ion-col col-6>
                     <ion-item>
                        <ion-label>Numero de cuota</ion-label>
                        <ion-input type="text" formControlName="numCuota"></ion-input>
                        <p [hidden]="formularioTarjeta.controls.cuotaComision.controls[i].controls.numCuota.valid">
                           Street is required
                        </p>
                     </ion-item>
                  </ion-col>
                  <ion-col col-6>
                     <ion-item>
                        <ion-label>Comision</ion-label>
                        <ion-input type="text" formControlName="comision"></ion-input>
                     </ion-item>
                  </ion-col>
               </ion-row>

            </div>
         </div>
      </div>

      <div class="margin-20">
         <a (click)="addAddress()" style="cursor: default">
            Add another address +
         </a>
      </div>

      <div>
         <button type="submit" [disabled]="!formularioTarjeta.valid">Submit</button>
      </div>
      <div></div>

      <div>
         <div>formularioTarjeta details:-</div>
         <pre>Is formularioTarjeta valid?: <br>{{formularioTarjeta.valid | json}}</pre>
         <pre>form value: <br>{{formularioTarjeta.value | json}}</pre>
      </div>
   </form>

</ion-content>